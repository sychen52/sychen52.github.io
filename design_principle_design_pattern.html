<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Design principles and Design Patterns</title>
<meta name="keywords" content="Design principles, Design Patterns, Python" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://orgmode.org/worg/style/worg.css"/>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Design principles and Design Patterns</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org293b28a">Cohesion and coupling</a></li>
<li><a href="#orgd7f5537">SOLID:</a></li>
<li><a href="#org0a694ce">Design patterns</a></li>
<li><a href="#org96de223">Dependency Injection vs dependency inversion:</a></li>
<li><a href="#org50de945">Code smells:</a></li>
</ul>
</div>
</div>
<p>
These are my notes while watch this <a href="https://www.youtube.com/c/ArjanCodes">Youtube channel.</a>
</p>

<div id="outline-container-org293b28a" class="outline-2">
<h2 id="org293b28a">Cohesion and coupling</h2>
<div class="outline-text-2" id="text-org293b28a">
<ul class="org-ul">
<li>Separate code that changes from that does not change.</li>
<li>Program to interfaces (abstract class) instead of implementations.</li>
<li>Prefer composition over inheritance.
<ul class="org-ul">
<li>Think about the bridge pattern</li>
</ul></li>
<li>Delegation
<ul class="org-ul">
<li>Call a class member (refer to item 3) to do things</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgd7f5537" class="outline-2">
<h2 id="orgd7f5537">SOLID:</h2>
<div class="outline-text-2" id="text-orgd7f5537">
<ul class="org-ul">
<li>Single responsibility
<ul class="org-ul">
<li>High cohesion</li>
<li>Break a long class into small classes. But this will introduce coupling.</li>
</ul></li>
<li>Open/close
<ul class="org-ul">
<li>Open for extension / close for modification
<ul class="org-ul">
<li>Instead of modifying the original class to add some additional type support, use the abstract class and a new inheritance is preferred.</li>
</ul></li>
</ul></li>
<li>Liskov substitution
<ul class="org-ul">
<li>When you have an abstract class and an abstract method, and you find the inherited methods want to have a different parameter from the abstract method. Pass the parameters in from the constructor, not the method itself.</li>
</ul></li>
<li>Interface segregation
<ul class="org-ul">
<li>Say you want two sets of interfaces, some subclasses only have one, while others have both. Instead put them all in one abstract class, you can 
<ul class="org-ul">
<li>Put one set into one abstract class, inherit it and add the second set</li>
<li>Create two abstract classes for two sets of interfaces separately, and combine them by composition in the subclass.</li>
</ul></li>
</ul></li>
<li>Dependency inversion
<ul class="org-ul">
<li>Instead of depending/coupling on a concrete class, you create an abstract class and depend on it, and make your original concrete class inherit from the abstract class.</li>
<li>This will make adding new inheritance to the abstract class easier.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org0a694ce" class="outline-2">
<h2 id="org0a694ce">Design patterns</h2>
<div class="outline-text-2" id="text-org0a694ce">
<ul class="org-ul">
<li>Creational
<ul class="org-ul">
<li>Singleton: only one instance; global access
<ul class="org-ul">
<li>For python, defining it as a module is the best way to do it.</li>
</ul></li>
<li>Factory: 
<ul class="org-ul">
<li>When
<ul class="org-ul">
<li>You want to create a group of objects together 
<ul class="org-ul">
<li>if there is just one object you want to create, just construct it.</li>
</ul></li>
<li>There are only a few valid combinations of objects
<ul class="org-ul">
<li>If any combination is allowed, you’d better use bridge pattern</li>
</ul></li>
</ul></li>
<li>Factory is not the owner of the created objects</li>
<li>Abstract factory and then derive it for every valide combination</li>
</ul></li>
</ul></li>
<li>Behavioral
<ul class="org-ul">
<li>Strategy: A function/algorithm can be done in different ways. 
<ul class="org-ul">
<li>put the different strategies into classes/functions, and pass it in instead of passing a string/enum around and do different stuff based on it.</li>
<li>If different strategies have different parameter variables. Make each strategy a class, and pass parameters to the constructor (Liskov substitution).</li>
</ul></li>
<li>Template: Base class defines the skeleton of the algorithm. Derived class can override some of the steps in the algorithm.
<ul class="org-ul">
<li>It is very similar to the strategy pattern if you implement different strategies with classes. There are two small differences:
<ul class="org-ul">
<li>Template has multiple steps, strategy usually has just one step. That is why you can use functions for the strategy pattern. </li>
<li>For the strategy pattern, the strategy is passed to a function to call. In the template pattern, you implement the skeleton function in the base class and inherit it to all strategies.</li>
</ul></li>
</ul></li>
<li>Observer / Publisher-Subscriber / Callback / Event system: one-to-many dependency at runtime, one object changes its state; notifies many dependents. One trigger causes many listeners to do some stuff. 
<ul class="org-ul">
<li>Note that when I say one, it does not mean there is really just one publisher/event. There could be a few different publisher/events, and they all have the same subscribers/listeners. </li>
<li>Instead of writing code that directly manipulates the subscribers/listeners at the publisher/event end, you write the code at the subscribers/listeners’ end and hand the function/callback over (subscribe) to the publisher/event to call.</li>
</ul></li>
</ul></li>
<li>Structural
<ul class="org-ul">
<li>Adaptor / Wrapper: convert one interface into another interface
<ul class="org-ul">
<li>Composition instead of inheritance</li>
<li>Delegate so that it works under the new interface.</li>
</ul></li>
<li>Bridge: decouple two things by using composition.
<ul class="org-ul">
<li>Shape and color class, Shape contains a color.</li>
<li>Difference with Strategy:
<ul class="org-ul">
<li>Strategy is passed into a function</li>
<li>Bridge is passed into a class as a composition. This is why strategy is a behavior and bridge is a structural</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org96de223" class="outline-2">
<h2 id="org96de223">Dependency Injection vs dependency inversion:</h2>
<div class="outline-text-2" id="text-org96de223">
<ul class="org-ul">
<li>Dependency of two classes (strong to weak)
<ul class="org-ul">
<li>Inheritance</li>
<li>Composition: has as member variable</li>
<li>Passed in as parameter:</li>
</ul></li>
<li>Dependency injection is a design pattern
<ul class="org-ul">
<li>Create outside and pass it in(to the constructor or the method).</li>
<li>Separate creating and using</li>
</ul></li>
<li>Dependency inversion is a design principle in SOLID:
<ul class="org-ul">
<li>In addition to passing in, it also needs an abstract class to reduce the dependency</li>
<li>This will make adding inheritance easier.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org50de945" class="outline-2">
<h2 id="org50de945">Code smells:</h2>
<div class="outline-text-2" id="text-org50de945">
<ul class="org-ul">
<li>Use string to represent a type -&gt; enum</li>
<li>Duplicate code -&gt; extract out as a function or class</li>
<li>Not using built-in functions (e.g. list comprehension)</li>
<li>Vague variable / function name (e.g. no unit)</li>
<li>Isinstance -&gt; inheritance</li>
<li>Boolean flag to do two different things -&gt; break into two functions</li>
<li>Catch and ignore all exception</li>
<li>Not using custom exceptions -&gt; custom exceptions can carry custom fields to provide more info.</li>
</ul>

<script src="https://utteranc.es/client.js"
        repo="sychen52/sychen52.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2021-11-24 Wed 00:00</p>
</div>
</body>
</html>
